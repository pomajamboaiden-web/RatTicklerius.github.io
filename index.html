<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diddy's Night Shift | Official</title>
    <style>
        :root {
            --fnaf-red: #c41e3a;
            --fnaf-green: #2ecc71;
            --gold: #d4af37;
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: black; color: white; font-family: 'Courier New', Courier, monospace;
            overflow: hidden; user-select: none;
        }

        /* --- VISUAL FILTERS --- */
        #crt { position: fixed; inset: 0; z-index: 1000; pointer-events: none; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0,0,0,0.1) 50%), linear-gradient(90deg, rgba(255,0,0,0.02), rgba(0,255,0,0.01), rgba(0,0,255,0.02)); background-size: 100% 3px, 3px 100%; }
        #static { position: fixed; inset: 0; z-index: 800; pointer-events: none; opacity: 0; background: url('https://upload.wikimedia.org/wikipedia/commons/5/5a/Static_noise.png'); transition: opacity 0.1s; }

        /* --- THE OFFICE --- */
        #office {
            width: 100vw; height: 100vh;
            background: url('https://cdn.decorpad.com/photos/2022/01/24/m_master-bath-white-double-doors.jpeg') center/cover;
            display: flex; align-items: center; justify-content: center; position: relative;
        }

        /* DIDDY IN HALLWAY (FIXED POSITIONING) */
        #diddy-at-door {
            position: absolute; left: 40%; top: 10%; height: 85%; width: auto;
            z-index: 5; display: none; pointer-events: none;
            filter: brightness(0.2) contrast(1.5) drop-shadow(0 0 20px black);
        }

        #door-frame {
            position: absolute; top: 0; left: 25%; width: 50%; height: 85%;
            overflow: hidden; z-index: 10; border-bottom: 5px solid #111;
        }

        #sliding-door {
            width: 100%; height: 100%; background: #222;
            border-bottom: 25px solid #111;
            transform: translateY(-100%);
            transition: transform 0.4s cubic-bezier(0.1, 0.7, 1.0, 0.1);
        }
        #sliding-door.closed { transform: translateY(0); }

        .btn-panel { position: absolute; bottom: 50px; z-index: 100; }
        .door-btn {
            width: 140px; height: 70px; background: #333; color: white; 
            border: 4px solid #555; font-size: 1.5rem; font-weight: bold; cursor: pointer;
        }
        .door-btn.active { background: var(--fnaf-red); border-color: white; box-shadow: 0 0 20px var(--fnaf-red); }

        /* --- HUD --- */
        .hud { position: fixed; padding: 15px; background: rgba(0,0,0,0.85); border: 2px solid white; z-index: 900; }
        #p-box { bottom: 20px; left: 20px; font-size: 1.2rem; }
        #t-box { top: 20px; right: 20px; text-align: right; }

        /* --- TABLET / BLUEPRINT MAP --- */
        #monitor {
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 88%;
            background: #000; transition: bottom 0.3s; z-index: 500;
            display: flex; border-top: 5px solid #fff;
        }

        #cam-view { width: 70%; height: 100%; background-size: cover; background-position: center; position: relative; border-right: 5px solid #333; }
        #cam-label { position: absolute; top: 20px; left: 20px; color: #0f0; background: rgba(0,0,0,0.7); padding: 5px 15px; font-size: 1.5rem; }
        
        /* Diddy on cameras */
        #diddy-camera { 
            position: absolute; bottom: 5%; right: 15%; height: 85%; width: auto; 
            display: none; filter: brightness(0.6) contrast(1.1); 
        }

        /* FNAF MAP LAYOUT */
        #fnaf-map {
            width: 30%; height: 100%; background: #0c0c0c; position: relative;
            background-image: radial-gradient(circle, #222 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .cam-btn {
            position: absolute; width: 65px; height: 45px;
            background: #111; color: white; border: 2px solid white;
            font-size: 0.85rem; font-weight: bold; cursor: pointer; text-align: center; line-height: 45px;
        }
        .cam-btn:hover { background: #444; color: var(--gold); border-color: var(--gold); }
        .cam-btn.active { background: var(--gold); color: black; border-color: white; }

        /* FNAF-STYLE Layout */
        #btn-c1 { top: 15%; left: 15%; }
        #btn-c2 { top: 15%; left: 60%; }
        #btn-c4 { top: 45%; left: 10%; } 
        #btn-c5 { top: 45%; left: 65%; } 
        #btn-c6 { top: 75%; left: 20%; }
        #btn-c3 { top: 75%; left: 55%; } 

        #flip-trigger {
            position: fixed; bottom: 0; left: 25%; width: 50%; height: 45px;
            background: rgba(255,255,255,0.25); z-index: 600; cursor: pointer;
            text-align: center; line-height: 45px; font-weight: bold; font-size: 1.2rem;
        }

        /* --- JUMPSCARE --- */
        #scare-screen {
            position: fixed; inset: 0; background: black; z-index: 2000;
            display: none; align-items: center; justify-content: center;
        }
        #scare-screen img { height: 120%; width: auto; animation: shake 0.05s infinite; }
        @keyframes shake { 0% {transform: rotate(1deg) scale(1.1)} 50% {transform: rotate(-1deg) scale(1.15)} }
    </style>
</head>
<body>

    <div id="crt"></div>
    <div id="static"></div>

    <div id="office">
        <!-- FIXED: NEW DIDDY CUTOUT -->
        <img id="diddy-at-door" src="https://r2.theaudiodb.com/images/media/artist/cutout/rid3171695285723.png">
        
        <div id="door-frame">
            <div id="sliding-door"></div>
        </div>
        
        <div class="btn-panel">
            <button id="door-toggle" class="door-btn" onclick="toggleDoor()">DOOR</button>
        </div>
    </div>

    <!-- HUD -->
    <div id="p-box" class="hud">
        Power: <span id="pow">100</span>%<br>
        <span id="usage-text">Usage: |</span>
    </div>

    <div id="t-box" class="hud">
        <h1 id="clock" style="margin:0">12 AM</h1>
        <div id="night-ui">Night 1</div>
    </div>

    <!-- MONITOR -->
    <div id="monitor">
        <div id="cam-view">
            <div id="cam-label">CAM 4</div>
            <img id="diddy-camera" src="https://r2.theaudiodb.com/images/media/artist/cutout/rid3171695285723.png">
        </div>
        <div id="fnaf-map">
            <button id="btn-c1" class="cam-btn" onclick="setCam(0)">CAM 1</button>
            <button id="btn-c2" class="cam-btn" onclick="setCam(1)">CAM 2</button>
            <button id="btn-c3" class="cam-btn" onclick="setCam(2)">CAM 3</button>
            <button id="btn-c4" class="cam-btn" onclick="setCam(3)">CAM 4</button>
            <button id="btn-c5" class="cam-btn" onclick="setCam(4)">CAM 5</button>
            <button id="btn-c6" class="cam-btn" onclick="setCam(5)">CAM 6</button>
        </div>
    </div>

    <div id="flip-trigger" onclick="toggleMonitor()">▲ MONITOR ▲</div>

    <!-- JUMPSCARE LAYER -->
    <div id="scare-screen">
        <img src="https://r2.theaudiodb.com/images/media/artist/cutout/rid3171695285723.png">
    </div>

    <script>
        const camUrls = [
            'https://www.garypeer.com.au/assets/media/2025/05/relax-and-reconnect-how-to-design-a-living-room-that-feels-like-home/main.jpg',
            'https://images.ctfassets.net/x5dih9iwqm78/6Mq4FEDTN9ThI1bdgvth9k/819c6c1278c08d1fe881a46679aac48f/Fusion_34FSN32603FH24_Kitchen_Samsung_Appliances_June_2024_2.jpg',
            'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?q=80&w=2070', // BATHROOM (CAM 3)
            'https://a-ap.storyblok.com/f/3000704/1220x700/7ee4980ccd/salt-pool-vs-chlorine-pool.png', // POOL (CAM 4)
            'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ9sQ7fK73MXM4oDB6Vu26qxnS6m38O-wHEX75v_tmOu08C-GoT', // SECRET (CAM 5)
            'https://static01.nyt.com/images/2022/09/18/realestate/13fix-hallway01/oakImage-1662821325754-articleLarge.jpg' // HALLWAY (CAM 6)
        ];

        let power = 100;
        let hour = 0;
        let night = 1;
        let isDoorDown = false;
        let isMonUp = false;
        let activeCam = 3; 

        let diddyPos = 3; 
        let attackTimeout = null;
        let blockCounter = null;

        function toggleDoor() {
            isDoorDown = !isDoorDown;
            document.getElementById('sliding-door').classList.toggle('closed', isDoorDown);
            document.getElementById('door-toggle').classList.toggle('active', isDoorDown);
        }

        function toggleMonitor() {
            isMonUp = !isMonUp;
            document.getElementById('monitor').style.bottom = isMonUp ? "0" : "-100%";
            noiseEffect(150);
            updateCams();
        }

        function setCam(id) {
            activeCam = id;
            document.getElementById('cam-label').innerText = "CAM " + (id + 1);
            document.getElementById('cam-view').style.backgroundImage = `url('${camUrls[id]}')`;
            document.querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-c' + (id+1)).classList.add('active');
            noiseEffect(200);
            updateCams();
        }

        function noiseEffect(ms) {
            const n = document.getElementById('static');
            n.style.opacity = "0.7";
            setTimeout(() => n.style.opacity = "0", ms);
        }

        setInterval(() => {
            if (Math.random() < (0.3 + (night * 0.05))) {
                let lastPos = diddyPos;
                if (diddyPos === 3) {
                    const poolNext = [0, 1, 4, 5];
                    diddyPos = poolNext[Math.floor(Math.random() * poolNext.length)];
                } else if (diddyPos === 2) {
                    diddyPos = 6;
                    onDiddyArrive();
                } else if (diddyPos < 6) {
                    if (Math.random() < 0.4) {
                        diddyPos = 2; 
                    } else {
                        const roamRooms = [0, 1, 4, 5].filter(r => r !== diddyPos);
                        diddyPos = roamRooms[Math.floor(Math.random() * roamRooms.length)];
                    }
                }
                if (isMonUp && activeCam === lastPos) noiseEffect(600);
                updateCams();
            }
        }, 6000);

        function onDiddyArrive() {
            document.getElementById('diddy-at-door').style.display = "block";
            attackTimeout = setTimeout(() => {
                if (!isDoorDown) doJumpscare();
            }, 3000); 
        }

        setInterval(() => {
            if (diddyPos === 6) {
                if (isDoorDown) {
                    if (!blockCounter) {
                        blockCounter = setTimeout(() => {
                            clearTimeout(attackTimeout);
                            diddyPos = 3; 
                            document.getElementById('diddy-at-door').style.display = "none";
                            blockCounter = null;
                            updateCams();
                        }, 5000); 
                    }
                } else {
                    clearTimeout(blockCounter);
                    blockCounter = null;
                }
            }
        }, 100);

        function updateCams() {
            const d = document.getElementById('diddy-camera');
            if (isMonUp && activeCam === diddyPos && diddyPos < 6) {
                d.style.display = "block";
            } else {
                d.style.display = "none";
            }
        }

        function doJumpscare() {
            document.getElementById('scare-screen').style.display = "flex";
            setTimeout(() => { location.reload(); }, 2000);
        }

        setInterval(() => {
            let usage = 1 + (isDoorDown ? 1 : 0) + (isMonUp ? 1 : 0);
            power -= (usage * 0.1);
            document.getElementById('pow').innerText = Math.floor(power);
            document.getElementById('usage-text').innerText = "Usage: " + "|".repeat(usage);
            if (power <= 0) location.reload();
        }, 1000);

        setInterval(() => {
            hour++;
            if (hour === 6) { 
                alert("6 AM: SUCCESS!"); 
                location.reload(); 
            }
            document.getElementById('clock').innerText = (hour === 0 ? "12" : hour) + " AM";
        }, 60000);

        setCam(3);
    </script>
</body>
</html>
